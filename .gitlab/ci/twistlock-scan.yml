.twistlock-scan-rule:
  rules:
    - if: '$CI_PIPELINE_SOURCE =~ /^(schedule|trigger)$/ && &TWISTLOCK_SCAN == "true"'

# used for jobs which we want to run in a pipeline even when previous jobs in the pipeline fail e.g. slack notification
.twistlock-scan-rule-always:
  rules:
    - if: '$CI_PIPELINE_SOURCE =~ /^(schedule|trigger)$/ && &TWISTLOCK_SCAN == "true"'
      when: always

twistlock-scan:hello-world:
  extends:
    - .twistlock-scan-rule
  script:
    - section_start "Hello world"
    - |
      echo "hello world"
    - section_end "Run Lint with Native Candidate"
    - job-done


#twistlock-scan:fan-in:
#  tags:
#    - gke
#  stage: fan-in
#  extends:
#    - .test-native-candidate-rule-always
#  script:
#    - echo "fan in"
